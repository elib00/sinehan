<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    {% load static %}
    <title>Log In</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-200 flex justify-center items-center h-screen">
    <div class="max-w-lg w-full p-8 bg-white rounded-lg shadow-md">        
        <h2 class="mb-6 text-3xl font-semibold text-center text-gray-800">Log In</h2>
        <form method="post">
            {% csrf_token %}
            <fieldset class="mb-4">
                <div class="mb-4">
                    <label for="id_email" class="block text-gray-700 font-semibold text-lg">{{ form.email.label }}</label>
                    {{ form.email }}

                    {% if form.email.errors %}
                    <div class="text-red-500 text-base mt-2">   
                        {% for error in form.email.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>

                <div class="mb-4">
                    <label for="id_password" class="block text-gray-700 font-semibold text-lg">{{ form.password.label }}</label>
                    {{ form.password }}

                    {% if form.password.errors %}
                    <div class="text-red-500 text-base mt-2">
                        {% for error in form.password.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>
                
                {% if form.non_field_errors %}
                <div class="text-red-500 text-base mt-2">
                    {% for error in form.non_field_errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                </div>
                {% endif %}
            </fieldset> 
            <button type="submit" class="w-full bg-black text-white font-semibold py-2 rounded-md transition duration-200 cursor-pointer">Validate</button>
        </form>
    </div>

    <div id="messageModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center">
        <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-4 transform transition-all">
            <!-- Modal content -->
            <div class="p-6">
                <!-- Close button -->
                <button id="closeModal" class="absolute top-0 right-0 text-gray-400 hover:text-gray-500 p-1 rounded-md transition ease-in-out duration-200">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
                
                <!-- Messages -->
                {% if messages %}
                    {% for message in messages %}
                        {% if message.tags == 'success' %}
                            <div data-success-message class="flex items-center p-4 mb-4 mt-4 rounded-lg bg-green-50 dark:bg-gray-800">
                                <div class="flex items-center justify-center flex-shrink-0 w-8 h-8 text-green-500 bg-green-100 rounded-lg">
                                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                    </svg>
                                </div>
                                <div class="ml-3 text-sm font-normal text-green-700">
                                    {{ message }}
                                </div>
                            </div>
                        {% elif message.tags == 'error' %}
                            <div data-error-message class="flex items-center p-4 mb-4 mt-4 rounded-lg bg-red-50">
                                <div class="flex items-center justify-center flex-shrink-0 w-8 h-8 text-red-500 bg-red-100 rounded-lg">
                                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                                    </svg>
                                </div>
                                <div class="ml-3 text-sm font-normal text-red-700">
                                    {{ message }}
                                </div>
                            </div>          
                        {% endif %}
                    {% endfor %}
                {% endif %}
            </div>
        </div>
    </div>
</body>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        let successMessages = document.querySelectorAll("[data-success-message]")
        if (successMessages.length > 0) {
            let modal = document.getElementById('messageModal');
            let closeButton = document.getElementById('closeModal');
            
            // Show modal
            modal.classList.remove('hidden');
            
            // Close when clicking X
            closeButton.onclick = () => {
                modal.classList.add('hidden');
            }
            
            // Close when clicking outside
            modal.onclick = (event) => {
                if (event.target === modal) {
                    modal.classList.add('hidden');
                }
            }
            
            // Auto close after 3 seconds
            //setTimeout(function() {
            //    modal.classList.add('hidden');
            //}, 3000);
        }
        
        let errorMessages = document.querySelectorAll("[data-error-message]")
        if (errorMessages.length > 0) {
            let modal = document.getElementById('messageModal');
            let closeButton = document.getElementById('closeModal');
            
            // Show modal
            modal.classList.remove('hidden');
            
            // Close when clicking X
            closeButton.addEventListener('click', () => {
                modal.classList.add('hidden');
            })
            
            // Close when clicking outside
            modal.addEventListener('click', () => {
                if (event.target === modal) {
                    modal.classList.add('hidden');
                }
            })
        }
    });
    
</script>
</html>


